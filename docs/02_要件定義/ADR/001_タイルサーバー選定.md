# ADR-001: タイルサーバーの選定

## ステータス
採用 (Accepted)

## 日付
2026-01-02

## コンテキスト
Urbanity Map で日本全国の市町村を地図上に表示するにあたり、ベースマップとして使用するタイルサーバーを選定する必要がある。

### 要件
- 日本語ラベルが正確であること
- 無料または低コストで利用可能であること
- APIキー不要または簡易な認証であること
- 静的サイトからの利用に適していること

## 検討した選択肢

### 1. MapLibre Demo Tiles
- **URL**: `https://demotiles.maplibre.org/style.json`
- **メリット**: APIキー不要、すぐに利用可能
- **デメリット**: デモ用のため本番利用非推奨、日本語ラベルなし

### 2. OpenStreetMap
- **URL**: `https://tile.openstreetmap.org/{z}/{x}/{y}.png`
- **メリット**: 無料、広く利用されている
- **デメリット**: 利用規約に「大量アクセス禁止」の制約、日本語ラベルはあるが品質にばらつき

### 3. CartoDB (CARTO)
- **URL**: `https://basemaps.cartocdn.com/...`
- **メリット**: デザイン性が高い、ダークテーマあり
- **デメリット**: 月75Kリクエスト制限、日本語ラベルが不完全

### 4. MapTiler
- **URL**: 要APIキー
- **メリット**: 高品質、カスタマイズ可能
- **デメリット**: 月100Kリクエスト制限、APIキー管理が必要

### 5. 国土地理院タイル ✅ 採用
- **URL**: `https://cyberjapandata.gsi.go.jp/xyz/pale/{z}/{x}/{y}.png`
- **メリット**:
  - 完全無料、APIキー不要
  - 日本国内の地名が正確
  - 公的機関（国土交通省）が提供するため信頼性が高い
  - 複数スタイル（標準、淡色、写真など）から選択可能
- **デメリット**:
  - 日本国外はカバーしていない（本プロジェクトでは問題なし）
  - 最大ズームレベルが18まで

## 決定
**国土地理院タイル（淡色地図: pale）** を採用する。

## 理由
1. **対象ユーザーが日本国内限定**であり、日本語ラベルの正確性が最重要
2. **完全無料・APIキー不要**で、静的サイトでの運用に最適
3. **公的機関提供**のため、サービス継続性と信頼性が高い
4. **淡色地図**はライトテーマのUIと調和する

## 影響
- 地図の表示範囲は日本国内に限定される（`maxBounds`で制御済み）
- 最大ズームレベルは18まで（市街地レベルの詳細表示は可能）

## 参考リンク
- [国土地理院タイル一覧](https://maps.gsi.go.jp/development/ichiran.html)
- [地理院タイル利用規約](https://maps.gsi.go.jp/help/termsofuse.html)
